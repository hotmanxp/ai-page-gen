# AI Page Generate App

åŸºäºAIçš„å‰ç«¯é¡µé¢ç”Ÿæˆåº”ç”¨ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°å¿«é€Ÿç”ŸæˆH5ç§»åŠ¨ç«¯ã€ç®¡ç†åå°å’ŒPCç«¯ç½‘é¡µã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **AIæ™ºèƒ½ç”Ÿæˆ**: åŸºäºKimi K2å¤§æ¨¡å‹ï¼Œæ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆå‰ç«¯é¡µé¢
- ğŸ“± **å¤šç±»å‹æ”¯æŒ**: æ”¯æŒH5ç§»åŠ¨ç«¯ã€ç®¡ç†åå°ã€PCç«¯ä¸‰ç§é¡µé¢ç±»å‹
- ğŸ”§ **å®æ—¶é¢„è§ˆ**: å·¦ä¾§é¢„è§ˆåŒºå®æ—¶æ˜¾ç¤ºç”Ÿæˆçš„é¡µé¢ï¼Œç§»åŠ¨ç«¯å¸¦æœ‰æ‰‹æœºå¤–æ¡†
- ğŸ’¬ **å¯¹è¯å¼äº¤äº’**: å³ä¾§AIå¯¹è¯åŒºï¼Œé€šè¿‡å¯¹è¯æ–¹å¼è¿­ä»£ä¼˜åŒ–é¡µé¢
- âš¡ **çƒ­æ›´æ–°**: æ”¯æŒå¼€å‘ç¯å¢ƒçƒ­é‡è½½ï¼Œå®æ—¶é¢„è§ˆä¿®æ”¹æ•ˆæœ
- ğŸ”„ **WebSocketé€šä¿¡**: å®æ—¶æ¨é€é¡µé¢æ›´æ–°ï¼Œæ”¯æŒå¤šäººåä½œ

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
ai-page-generate-app/
â”œâ”€â”€ frontend/          # å‰ç«¯é¡¹ç›® (React + Vite + TypeScript)
â”œâ”€â”€ backend/           # åç«¯æœåŠ¡ (Node.js + Express + WebSocket)
â”œâ”€â”€ templates/         # é¡µé¢æ¨¡æ¿
â”œâ”€â”€ generated-pages/   # ç”Ÿæˆçš„é¡µé¢æ–‡ä»¶
â””â”€â”€ pnpm-workspace.yaml # pnpmå·¥ä½œåŒºé…ç½®
```

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Frontend)
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **è·¯ç”±**: React Router
- **UIç»„ä»¶åº“**: Ant Design
- **æ ·å¼**: Tailwind CSS + Less Modules
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **é€šä¿¡**: WebSocket (Socket.IO Client)

### åç«¯ (Backend)
- **è¿è¡Œæ—¶**: Node.js + TypeScript
- **æ¡†æ¶**: Express.js
- **AIé›†æˆ**: OpenAI SDK (Kimi K2æ¨¡å‹)
- **å®æ—¶é€šä¿¡**: Socket.IO
- **æ–‡ä»¶å¤„ç†**: fs-extra
- **ç¯å¢ƒé…ç½®**: dotenv

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

### å‰ç½®è¦æ±‚
- Node.js â‰¥ 16.0.0
- pnpm â‰¥ 8.0.0

### ä¸€é”®å®‰è£…
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm run init
```

### å¼€å‘æ¨¡å¼
```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

### å•ç‹¬å¯åŠ¨
```bash
# ä»…å¯åŠ¨å‰ç«¯
pnpm run dev:frontend

# ä»…å¯åŠ¨åç«¯
pnpm run dev:backend
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºå‰åç«¯
pnpm run build

# å•ç‹¬æ„å»ºå‰ç«¯
pnpm run build:frontend

# å•ç‹¬æ„å»ºåç«¯
pnpm run build:backend
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### åç«¯ç¯å¢ƒå˜é‡
å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶é…ç½®ï¼š

```env
# æœåŠ¡ç«¯å£
PORT=3001

# AIæ¨¡å‹é…ç½®
ANTHROPIC_AUTH_TOKEN=your_kimi_api_key_here
BASE_URL=https://api.moonshot.cn/anthropic
MODEL_NAME=kimi-k2

# æ–‡ä»¶å­˜å‚¨
TEMPLATES_DIR=./templates
GENERATED_PAGES_DIR=./generated-pages
```

## ğŸ¯ ä½¿ç”¨è¯´æ˜

1. **å¯åŠ¨åº”ç”¨**: è¿è¡Œ `pnpm run dev` å¯åŠ¨å‰åç«¯æœåŠ¡
2. **é€‰æ‹©é¡µé¢ç±»å‹**: åœ¨é¡µé¢é¡¶éƒ¨é€‰æ‹© H5ç§»åŠ¨ç«¯ã€ç®¡ç†åå°æˆ–PCç«¯
3. **è¾“å…¥éœ€æ±‚**: åœ¨å³ä¾§AIå¯¹è¯åŒºè¾“å…¥é¡µé¢éœ€æ±‚æè¿°
4. **ç”Ÿæˆé¡µé¢**: ç‚¹å‡»å‘é€æŒ‰é’®ï¼ŒAIå°†ç”Ÿæˆå¯¹åº”é¡µé¢
5. **é¢„è§ˆæ•ˆæœ**: å·¦ä¾§é¢„è§ˆåŒºå®æ—¶æ˜¾ç¤ºç”Ÿæˆçš„é¡µé¢
6. **è¿­ä»£ä¼˜åŒ–**: ç»§ç»­å¯¹è¯ä¿®æ”¹é¡µé¢å†…å®¹å’Œæ ·å¼

## ğŸ“ é¡¹ç›®ç»“æ„

### å‰ç«¯ç›®å½•
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/     # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout.tsx       # é¡µé¢å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ PreviewArea.tsx  # é¢„è§ˆåŒºåŸŸ
â”‚   â”‚   â””â”€â”€ ChatArea.tsx     # å¯¹è¯åŒºåŸŸ
â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ HomePage.tsx     # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.tsx        # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.tsx       # åº”ç”¨å…¥å£
â”œâ”€â”€ public/            # é™æ€èµ„æº
â””â”€â”€ package.json       # å‰ç«¯ä¾èµ–é…ç½®
```

### åç«¯ç›®å½•
```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/        # APIè·¯ç”±
â”‚   â”‚   â””â”€â”€ pageRoutes.ts    # é¡µé¢ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ aiService.ts      # AIç”ŸæˆåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ fileService.ts    # æ–‡ä»¶æ“ä½œ
â”‚   â”‚   â””â”€â”€ websocketService.ts # WebSocketé€šä¿¡
â”‚   â””â”€â”€ index.ts       # æœåŠ¡å…¥å£
â”œâ”€â”€ templates/         # é¡µé¢æ¨¡æ¿
â”œâ”€â”€ generated-pages/   # ç”Ÿæˆçš„é¡µé¢
â””â”€â”€ package.json       # åç«¯ä¾èµ–é…ç½®
```

## ğŸ”Œ API æ¥å£

### é¡µé¢åˆå§‹åŒ–
- **POST** `/api/pages/initialize`
- åˆå§‹åŒ–æ–°çš„é¡µé¢é¡¹ç›®

### é¡µé¢ç”Ÿæˆ
- **POST** `/api/pages/generate`
- æ ¹æ®éœ€æ±‚ç”Ÿæˆé¡µé¢å†…å®¹

### è·å–é¡µé¢å†…å®¹
- **GET** `/api/pages/:pageId/content`
- è·å–æŒ‡å®šé¡µé¢çš„HTMLå†…å®¹

### æ›´æ–°é¡µé¢å†…å®¹
- **PUT** `/api/pages/:pageId/content`
- æ‰‹åŠ¨æ›´æ–°é¡µé¢å†…å®¹

## ğŸ”„ WebSocket äº‹ä»¶

### å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨
- `join_page`: åŠ å…¥é¡µé¢æˆ¿é—´
- `leave_page`: ç¦»å¼€é¡µé¢æˆ¿é—´

### æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯
- `page_message`: é¡µé¢ç›¸å…³æ¶ˆæ¯
  - `page_update`: é¡µé¢å†…å®¹æ›´æ–°
  - `generation_start`: å¼€å§‹ç”Ÿæˆ
  - `generation_complete`: ç”Ÿæˆå®Œæˆ
  - `error`: é”™è¯¯ä¿¡æ¯

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢ç±»å‹
1. åœ¨ `frontend/src/pages/HomePage.tsx` ä¸­æ·»åŠ æ–°çš„é¡µé¢ç±»å‹é€‰é¡¹
2. åœ¨ `backend/src/services/fileService.ts` ä¸­æ·»åŠ å¯¹åº”çš„æ¨¡æ¿é€»è¾‘
3. æ›´æ–°AIç³»ç»Ÿæç¤ºä»¥é€‚é…æ–°çš„é¡µé¢ç±»å‹

### è‡ªå®šä¹‰æ¨¡æ¿
åœ¨ `backend/templates/` ç›®å½•ä¸‹æ·»åŠ å¯¹åº”ç±»å‹çš„HTMLæ¨¡æ¿æ–‡ä»¶ï¼š
- `h5.html`: ç§»åŠ¨ç«¯æ¨¡æ¿
- `admin.html`: ç®¡ç†åå°æ¨¡æ¿
- `pc.html`: PCç«¯æ¨¡æ¿

### é›†æˆå…¶ä»–AIæ¨¡å‹
ä¿®æ”¹ `backend/src/services/aiService.ts` ä¸­çš„ `generatePage` æ–¹æ³•ï¼Œé€‚é…å…¶ä»–AIæœåŠ¡æä¾›å•†ã€‚

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå‰ç«¯æµ‹è¯•
pnpm run test:frontend

# è¿è¡Œåç«¯æµ‹è¯•
pnpm run test:backend
```

## ğŸ“‹ ä»£ç è§„èŒƒ

```bash
# è¿è¡Œä»£ç æ£€æŸ¥
pnpm run lint

# è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼
pnpm run lint:fix
```

## ğŸš§ å¸¸è§é—®é¢˜

### 1. WebSocketè¿æ¥å¤±è´¥
- æ£€æŸ¥å‰åç«¯ç«¯å£é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®ä¿é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢WebSocketè¿æ¥

### 2. AIç”Ÿæˆå¤±è´¥
- æ£€æŸ¥ `ANTHROPIC_AUTH_TOKEN` æ˜¯å¦é…ç½®æ­£ç¡®
- ç¡®è®¤APIé…é¢æ˜¯å¦å……è¶³

### 3. é¡µé¢é¢„è§ˆä¸æ›´æ–°
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- ç¡®è®¤WebSocketè¿æ¥æ˜¯å¦æ­£å¸¸

### 4. ç»„ä»¶æ„å»ºå¤±è´¥
- ç³»ç»Ÿä¼šè‡ªåŠ¨è§£æå’ŒæŠ¥å‘Šæ„å»ºé”™è¯¯
- æŸ¥çœ‹å‰ç«¯æ§åˆ¶å°æˆ–é¡µé¢æç¤ºè·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
- æ ¹æ®é”™è¯¯ç±»å‹æ£€æŸ¥ä»£ç è¯­æ³•ã€ä¾èµ–æˆ–é…ç½®é—®é¢˜

## ğŸ› ï¸ é”™è¯¯å¤„ç†

æœ¬é¡¹ç›®åŒ…å«å®Œæ•´çš„ç»„ä»¶æ‰“åŒ…é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- **è¯­æ³•é”™è¯¯æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å’ŒæŠ¥å‘Šä»£ç è¯­æ³•é—®é¢˜
- **ä¾èµ–é”™è¯¯å¤„ç†**: æ£€æµ‹ç¼ºå¤±çš„æ¨¡å—å’Œåº“
- **é…ç½®é”™è¯¯æç¤º**: æä¾›é…ç½®ç›¸å…³çš„é”™è¯¯ä¿¡æ¯
- **ç”¨æˆ·å‹å¥½æç¤º**: å°†æŠ€æœ¯æ€§é”™è¯¯ä¿¡æ¯è½¬æ¢ä¸ºæ˜“äºç†è§£çš„æç¤º
- **å®æ—¶é”™è¯¯æ¨é€**: é€šè¿‡WebSocketå°†é”™è¯¯ä¿¡æ¯å®æ—¶æ¨é€åˆ°å‰ç«¯
- **è¯¦ç»†æ—¥å¿—è®°å½•**: æ‰€æœ‰é”™è¯¯éƒ½ä¼šè¢«è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ä¾¿äºè°ƒè¯•
- **è‡ªåŠ¨ä»£ç ä¿®å¤**: å½“ç»„ä»¶æ„å»ºå¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†é”™è¯¯ä¿¡æ¯å’Œä»£ç å‘é€ç»™AIæ¨¡å‹è¿›è¡Œä¿®å¤ï¼Œç„¶åé‡æ–°å°è¯•æ„å»º

äº†è§£æ›´å¤šå…³äºé”™è¯¯å¤„ç†çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [ç»„ä»¶é”™è¯¯å¤„ç†æ–‡æ¡£](./backend/docs/component-error-handling.md)ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ GitHub Issue
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**Made with â¤ï¸ by AI Page Generate Team**